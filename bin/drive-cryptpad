#!/usr/bin/env node
const { createShell } = require('../src/shell');
const createDriveAdapter = require('../src/fs/drive-adapter');

const cpServer = process.env.CP_SERVER || 'freemium.cryptpad.fr';
const driveUri = process.env.CP_DRIVE_URI || '/drive/#/2/drive/edit/5+9MFiXfG0w8T-g6GDQPefnC/';
const cpURL = 'https://' + cpServer;
const driveUrl = cpURL + driveUri;
const wsURL = 'wss://' + cpServer + '/cryptpad_websocket';

const fs = createDriveAdapter({ driveUrl, wsURL, serverOrigin: driveUrl });
fs.ready().then(() => {
    const shell = createShell(fs, { prompt: 'cp> ' });
    shell.start();
}).catch((err) => {
    console.error('ERROR');
    console.error(err);
});


